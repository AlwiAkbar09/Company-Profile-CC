!function(T,w,M){var O,k,x=!0,E=null,e=w.querySelector('[src*="t.ghostboard.io"]'),q="https://api.ghostboard.io/",L=e&&e.getAttribute("data-gbid");function X(e,t,r){e.addEventListener?e.addEventListener(t,r,!1):e.attachEvent?e.attachEvent("on"+t,r):e["on"+t]=r}function A(e){(new Image).src=e}function t(){try{if(!x)return!1;x=!1;function t(e){if(E||S)return!1;S=!0,p.G=e,i=0;var n=function(){try{return new XMLHttpRequest}catch(e){}try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}return A(q+"noscript/"+L+"/pixel.gif"),!1}();if(!n)return!1;n.open("POST",q+"v3/views/"+L,!0),n.setRequestHeader("Content-Type","application/json; charset=utf-8"),n.onreadystatechange=function(){if(S=!1,n.readyState===XMLHttpRequest.DONE&&200===n.status){var e=JSON.parse(n.responseText);if(E=e.id,e.tc)for(var t=w.querySelectorAll("a, img"),r=0;r<t.length;r++)t[r].dataset.tracked||(t[r].dataset.tracked="true",X(t[r],"click",function(e){var t,r,n;if(e&&(t=(e=e.target||e.currentTarget).innerText||e.title,r=e.currentSrc,e)&&(t||r)){n=[],e.href&&n.push(["l",e.href]),t?n.push(["a",t]):r&&n.push(["i",r]);for(var o=n,i=q+"v2/clicks/"+L+"?",a=0,c=o.length;a<c;a++)i+=(0===a?"":"&")+o[a][0]+"="+encodeURIComponent(o[a][1]);A(i)}}))}},n.send(JSON.stringify(p))}function n(e,t){var r=(new Date).getTime();E&&(!m||1e3<=r-m||t)&&(m=r,A(q+"views/"+E+"/heartbeat?t="+i+"&e="+encodeURIComponent(e)+"&sp="+O))}function r(e){b=(new Date).getTime(),E||t(e)}function o(e){var t,r;t=(new Date).getTime(),0<(r=t-b)&&(i+=parseInt(r/1e3,10),b=t),n(e,!0),k&&(E=null)}var e,i=0,a=w.querySelector("link[type='application/rss+xml']"),c=w.querySelector("head base"),s=a||c,u=s?s.href:"",l=w.querySelector("link[rel='shortcut icon']"),h=w.querySelector("link[rel='icon']"),d=l||h,f=d?d.href:"",g=M||T.location||w.location,p=("undefined"!=typeof ghost&&ghost&&ghost.url&&ghost.url.api()?0===(u=(e=ghost.url.api()).substring(0,e.indexOf("/ghost/")+1)).indexOf("//")&&(u=g.protocol+u):u=u&&-1!==u.indexOf("/rss/")?u.substring(0,u.length-4):u||g.origin+"/",{A:u,C:navigator.language||navigator.userLanguage,F:g.origin,I:f,U:g.href||w.url,V:5}),v=function(){try{return T.top.document.referrer}catch(e){try{return T.parent.document.referrer}catch(e){return w.referrer}}}(),y=(v&&(p.D=v),w.head.querySelector("[name=generator]")),b=(y&&y.content&&(p.E=y.content),null),m=null,S=!1;X(w,"visibilitychange",function(){"hidden"===w.visibilityState&&o("visibilityState:hidden"),"visible"===w.visibilityState&&r("visibilityState:visible")}),["focus","focusin","pageshow"].forEach(e=>X(T,e,()=>r(e))),["blur","focusout","pagehide","beforeunload","unload"].forEach(e=>X(T,e,()=>o(e))),("function"==typeof w.hasFocus&&w.hasFocus()||"visible"===w.visibilityState)&&r("document-focus")}catch(e){}}L?(O=0,k=function(){try{return/Mobile|Tablet|iP(hone|od|ad)|Android|BlackBerry|IEMobile|Kindle/i.test(T.navigator.userAgent)}catch(e){return!1}}(),X(w,"DOMContentLoaded",t),X(T,"load",t),X(T,"scroll",function(){var e=T.scrollY||w.documentElement.scrollTop,t=w.documentElement.scrollHeight-T.innerHeight;0<t&&(O=Math.max(O,Math.round(e/t*100)))}),w&&"complete"===w.readyState&&t()):console.warn("ðŸ‘‰ Please check your Ghostboard tracking code, it looks invalid. More info: https://ghostboard.io/blog/how-to-setup-ghostboard/")}(window,document,location);